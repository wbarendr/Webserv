# cat /etc/hosts

#127.0.0.1	localhost
#127.0.0.1	yes	
#::1		localhost
#127.0.0.1	cheese.localdomain	cheese


#server {
#    listen       5000;
#    server_name  cheese;
#
#    location / {
#        root   /usr/share/nginx/cheese/html;
#        index  index.html;
#    }
#}

#localhost:5000 -> cheese index
#	even if localhost resolves to 127.0.0.1, no server listens on 127.0.0.1 explicitly
#	so server selects 0.0.0.0:5000
#cheese:5000 ""
#yes:5000 ""
#publicip:5000 ""
#0.0.0.0:5000 ""
#127.0.0.1:5000 ""

#server {
#    listen       5000;
#    server_name  localhost;
#    location / {
#        root   /usr/share/nginx/localhost/html;
#        index  index.html;
#    }
#
#}

#localhost:5000 -> localhost index
#	even if localhost resolves to 127.0.0.1, no server listens on 127.0.0.1 explicitly
#	so server selects 0.0.0.0:5000 with host localhost
#cheese:5000 -> cheese index
#	cheese resolves to 127.0.0.1, no servers listens on 127.0.0.1 explicitly
#	so server selects 0.0.0.0:5000 with host cheese 
#yes:5000 -> cheese index
#	cheese resolves to 127.0.0.1, no servers listens on 127.0.0.1 explicitly
#	so server selects 0.0.0.0:5000 with host yes. Doesn't find any so fallback to default
#	virtual config cheese (but if localhost would appear first, it would select localhost)
#publicip:5000 --> ""
#0.0.0.0:5000 --> ""
#127.0.0.1:5000 --> ""

server {
    listen       127.0.0.1:5000;

    location / {
        root   /usr/share/nginx/other/html;
        index  index.html;
    }
}

#localhost:5000 -> other index
#	localhost resolves to 127.0.0.1, one server listens on 127.0.0.1 explicitly
#	so server selects 127.0.0.1:5000
# now every host name that resolves to 127.0.0.1 will show other index
#cheese:5000 -> ""
#yes:5000 -> ""
#publicip:5000 --> cheese index (default server since first 5000 that is not local block, and publicip doesnt match 127.0.0.1)
#0.0.0.0:5000 --> other index (0.0.0.0 matches with other, because although cheese is the first 0.0.0.0:5000 block, there is a server that listens explicitely on 127.0.0.1, and 0.0.0.0 means all local ip)
#127.0.0.1:5000 --> other index


server {
    listen       127.0.0.1:5000;
	server_name 	yes;

    location / {
        root   /usr/share/nginx/yes/html;
        index  index.html;
    }
}


#localhost:5000 -> other index
#	localhost resolves to 127.0.0.1, one server listens on 127.0.0.1 explicitly
#	so server selects 127.0.0.1:5000
# now every host name that resolves to 127.0.0.1 will show other index
#cheese:5000 -> ""
#yes:5000 -> yes index since one server listens on 127.0.0.1 with server name yes
#publicip:5000 --> cheese index (default server since first non local 5000 block)
#0.0.0.0:5000 --> other index (since other is first block for all local ip)
#127.0.0.1:5000 --> other index

#note: if server  127.0.0.1 with server_name yes would be come first, then
# every request to 127.0.0.1 would fall back to this one.

# right now there is no way to access localhost.html, since  localhost:5000 returns other.html
# and default server for .0:5000 is cheese
# but if add  one server listening on 127.0.0.1 and server_name localhost then it's possible:

#server {
#    listen       127.0.0.1:5000;
#	server_name 	localhost;
#
#    location / {
#        root   /usr/share/nginx/localhost/html;
#        index  index.html;
#    }
#
#}

#localhost:5000 -> localhost since there is a server listening on 127.0.0.1 with a server_name localhost
#cheese:5000 -> other
#yes:5000 -> yes index since one server listens on 127.0.0.1 with server name yes
#publicip:5000 --> cheese index (default server since first non local 5000 block)
#0.0.0.0:5000 --> other index (since other is first block for all local ip)
#127.0.0.1:5000 --> other index


#0.0.0.0 means give me anything local, if not fall back to default 0.0.0.0:5000

#map <port, map<ip:port, vector<t_config>>>


server {
    listen       127.0.0.2:5000;
	server_name 	yes;

    location / {
        root   /usr/share/nginx/yes/html;
        index  index.html;
    }
}
#
server {
    listen       80.113.228.57:5000;
	server_name 	yes;

    location / {
        root   /usr/share/nginx/yes/html;
        index  index.html;
    }
}
#
#server {
#    listen       5000;
#	server_name 	yes;
#
#    location / {
#        root   /usr/share/nginx/yes/html;
#        index  index.html;
#    }
#}
